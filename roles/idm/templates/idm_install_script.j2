{{ '#!' }}{{ bash_shell.stdout }}
####################################
# IDM Install script generated by Ansible.
#
# Important. Please do not edit this script by hand.
# It will be overwritten on the next Ansible run.
#
# This install is configured specifically for this instance.
#
# Options:
{% if setup_dns == True %}
#   - Setup a DNS server on this host.
{% endif %}

# Install command
{{ idm_install_command }} \
    --realm={{ idm_domain_name| upper | default(  )}} \
    --domain={{ idm_domain_name | lower }} \
    --ds-password={{ idm_ds_password | default( idm_admin_password ) }} \
    --admin-password={{ idm_admin_password }} \
    --ip-address={{ idm_primary_ip_address | default(  hostvars[inventory_hostname]['ansible_default_ipv4']['address']  ) }} \
{% if setup_dns == True %}
    --setup-dns \
    --auto-forwarders \
{% endif %}
{%  if idm_reverse_lookup_on_install == False %}
    --no-host-dns  \
{% endif %}
    --unattended
# Always exit with success. Yes I know....
# TODO: Write a python IDM module.
exit 0
